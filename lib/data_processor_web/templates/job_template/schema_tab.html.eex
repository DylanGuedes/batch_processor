<h4 class="ui header">Current Schema</h4>

<table class="ui celled table">
  <thead>
    <tr>
      <th>Field Name</th>
      <th>Type</th>
      <th>Remove</th>
    </tr>
  </thead>
  <tbody>
    <%= for {k, v} <- Map.get(@params, "schema") do %>
      <tr>
        <td><%= k %></td>
        <td><%= v %></td>
        <td>
          <%= link("Delete", to: job_template_field_path(@conn, :update_field, @template.id, [key: k, table: "schema", command: "drop"]), method: :post, class: "ui icon button red") %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<div class="ui divider"></div>

<h4 class="ui header">Add schema field</h4>
<div class="ui segment center aligned ">
  <%= form_for @conn, job_template_field_path(@conn, :update_field, @template.id), [class: "ui form"], fn f -> %>
    <div class="field">
      <%= label f, :key, "Field Name" %>
      <%= text_input f, :key, class: "ui field" %>
    </div>

    <div class="field">
      <%= label f, :value %>
      <%= select f, :value, ["string", "double", "integer"] %>
    </div>

    <%= hidden_input f, :command, value: :update %>
    <%= hidden_input f, :table, value: :schema %>

    <button class="fluid ui left labeled icon green button" type="submit">
      <i class="icon plus"></i>Add field to schema
    </button>
  <% end %>
</div>
